const Q = require('q');
const logger = require('dachshund-logger').getLogger(__filename);
const lessCssHandler = require('./lessCssHandler.js');

const webComponentsStyleHandler = exports;

webComponentsStyleHandler.extension = "wcstyle";

webComponentsStyleHandler.handle = function (component, scriptPath) {
    "use strict";

    let deferred = Q.defer();

    lessCssHandler.handle(component, scriptPath).then(function (cssData) {

        deferred.resolve('<style is="custom-style">\n' + cssData + '\n</style>');

    }).fail(deferred.reject);

    return deferred.promise;
};