/**
 * The component script handler contains all methods to handle files defined in the component resource. The script
 * handler are held in the folder './componentScriptHandler' and are responsible to manage files with different
 * file extensions. Currently the following script handler are defined:
 * - __Javascript Handler__ Handles all script files with the file extension _*.js_
 * - __Jazz Handler__ Handles all jazz template files with the file extension _*.jazz_
 * - __LessCSS Handler__ Handles all less css files with the file extension _*.less_
 * - __Static Handler__ Handles all files with the file extension _*.static_
 *
 * @module componentScriptHandler
 */
'use strict';

const fs = require("fs");
const logger = require('dachshund-logger').getLogger(__filename);

let _scriptHandler = undefined;

exports.getScriptHandler = function(extension) {
	if (_scriptHandler == undefined)
	{
		loadScriptHandler();
	}

	return _scriptHandler[extension];
};

const loadScriptHandler = function() {
	_scriptHandler = {};

	fs.readdirSync(__dirname + "/componentScriptHandler").forEach(function(file) {
		try
		{
			let scriptHandler = require("./componentScriptHandler/" + file);

			_scriptHandler[scriptHandler.extension] = scriptHandler;
		} catch (err)
		{
			logger.error("Error while loading component script handler '"+ file +"' because of: " + err)
		}
	});
};


